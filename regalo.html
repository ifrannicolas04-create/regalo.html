<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Para ti ‚ù§Ô∏è</title>

<style>
html,body{
  margin:0;height:100%;overflow:hidden;
  background:radial-gradient(circle at top,#2a0033,#000);
  font-family:Arial,sans-serif;
}

/* INTRO */
#intro{
  position:fixed;inset:0;z-index:100;
  background:radial-gradient(circle,#3a0020,#000);
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  color:#ffd36a;
}
.buttons{position:relative;width:260px;height:70px}
button{
  position:absolute;padding:12px 26px;
  font-size:1.2rem;border-radius:30px;
  border:2px solid #ffd36a;
  background:#b0003a;color:#ffd36a;
  font-weight:bold;cursor:pointer;
}
#yes{left:0}
#no{right:0;background:#333;color:#ccc}

/* REGALO */
#giftLayer{
  position:fixed;inset:0;z-index:90;
  background:radial-gradient(circle,#250018,#000);
  display:none;flex-direction:column;
  justify-content:center;align-items:center;
  color:#ffd36a;
}
#gift{
  font-size:90px;
  cursor:pointer;
  animation:bounce 2s infinite;
}
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-25px)}
}

/* FRASE FIJA */
.phrase{
  position:fixed;
  left:50%;top:15%;
  transform:translateX(-50%);
  font-size:1.35rem;
  max-width:92%;
  text-align:center;
  opacity:0;
  transition:opacity 1.5s;
  z-index:20;
  color:#ffe0f0;
}

/* PLAYER */
.player{
  position:fixed;bottom:18px;left:50%;
  transform:translateX(-50%);
  width:90%;max-width:420px;
  background:rgba(40,0,30,.85);
  border:1px solid rgba(255,211,106,.4);
  border-radius:18px;
  display:flex;
  align-items:center;
  gap:14px;
  padding:14px 18px;
  z-index:50;
}
.player button{
  background:none;border:none;
  color:#ffd36a;font-size:28px;
}
.progress{
  flex:1;height:8px;
  background:rgba(255,255,255,.25);
  border-radius:10px;
}
.bar{
  height:100%;width:0%;
  background:linear-gradient(90deg,#ff4fa3,#ffd36a);
}

canvas{display:block}
</style>
</head>

<body>

<!-- INTRO -->
<div id="intro">
  <h1>¬øQuieres ser mi novia? ‚ù§Ô∏è</h1>
  <div class="buttons">
    <button id="yes">S√ç</button>
    <button id="no">NO</button>
  </div>
</div>

<!-- REGALO -->
<div id="giftLayer">
  <h2>üéÅ Tengo un regalo para ti</h2>
  <div id="gift">üéÅ</div>
</div>

<div class="phrase" id="phrase"></div>
<canvas id="c"></canvas>

<!-- PLAYER -->
<div class="player">
  <button id="play">‚ñ∂Ô∏è</button>
  <div class="progress" id="progress">
    <div class="bar" id="bar"></div>
  </div>
</div>

<audio id="audio">
  <source src="audio/Bronco-Adoro.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.148.0/build/three.min.js"></script>

<script>
/* BOT√ìN NO */
no.onmouseover=no.ontouchstart=()=>{
  no.style.left=Math.random()*200+"px";
  no.style.top=Math.random()*120+"px";
};

/* AUDIO */
const audio=document.getElementById("audio");
const play=document.getElementById("play");
const bar=document.getElementById("bar");
const progress=document.getElementById("progress");

play.onclick=async()=>{
  if(audio.paused){await audio.play();play.textContent="‚è∏Ô∏è";}
  else{audio.pause();play.textContent="‚ñ∂Ô∏è";}
};
audio.ontimeupdate=()=>{
  bar.style.width=(audio.currentTime/audio.duration*100||0)+"%";
};
progress.onclick=e=>{
  const r=progress.getBoundingClientRect();
  audio.currentTime=((e.clientX-r.left)/r.width)*audio.duration;
};

/* FLUJO */
yes.onclick=()=>{
  intro.style.display="none";
  giftLayer.style.display="flex";
};
gift.onclick=()=>{
  giftLayer.style.display="none";
  initUniverse();
};

/* FRASES */
const frasesFijas=[
"üí´ Si te quiero es porque sos mi amor, mi c√≥mplice y todo. ‚Äì Mario Benedetti",
"‚ù§Ô∏è No te rindas, por favor no cedas.",
"üåå Entre millones de estrellas, siempre sos vos."
];
let fi=0;
const phraseBox=document.getElementById("phrase");
setInterval(()=>{
  phraseBox.style.opacity=0;
  setTimeout(()=>{
    phraseBox.textContent=frasesFijas[fi%frasesFijas.length];
    phraseBox.style.opacity=1;
    fi++;
  },1200);
},7500);

/* THREE */
let scene,camera,renderer,stars,saturn,ring,photos=[],miniPlanets=[],orbitTexts=[],angle=0;

function initUniverse(){
  scene=new THREE.Scene();

  camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,1,15000);
  camera.position.z=900;

  renderer=new THREE.WebGLRenderer({canvas:c,alpha:true});
  renderer.setSize(innerWidth,innerHeight);
  renderer.setPixelRatio(Math.min(devicePixelRatio,1.5));
  renderer.outputColorSpace=THREE.SRGBColorSpace;

  /* LUCES */
  scene.add(new THREE.AmbientLight(0xffffff,.85));
  const sun=new THREE.PointLight(0xffe6c0,1.6,6000);
  sun.position.set(500,300,700);
  scene.add(sun);

  /* ESTRELLAS */
  const g=new THREE.BufferGeometry(),v=[],col=[];
  for(let i=0;i<5000;i++){
    v.push((Math.random()-0.5)*14000,(Math.random()-0.5)*14000,(Math.random()-0.5)*14000);
    const c=new THREE.Color().setHSL(Math.random(),0.6,0.75);
    col.push(c.r,c.g,c.b);
  }
  g.setAttribute("position",new THREE.Float32BufferAttribute(v,3));
  g.setAttribute("color",new THREE.Float32BufferAttribute(col,3));
  stars=new THREE.Points(g,new THREE.PointsMaterial({size:1.7,vertexColors:true}));
  scene.add(stars);

  const loader=new THREE.TextureLoader();

  /* SATURNO */
  saturn=new THREE.Mesh(
    new THREE.SphereGeometry(170,96,96),
    new THREE.MeshPhysicalMaterial({
      map:loader.load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/saturn.jpg"),
      roughness:0.45,metalness:0.05,clearcoat:0.25
    })
  );
  scene.add(saturn);

  ring=new THREE.Mesh(
    new THREE.RingGeometry(210,340,256),
    new THREE.MeshStandardMaterial({
      map:loader.load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/saturnringcolor.jpg"),
      transparent:true,side:THREE.DoubleSide,depthWrite:false
    })
  );
  ring.rotation.x=Math.PI/2.4;
  scene.add(ring);

  /* PLANETAS CHICOS */
  const planetTex=[
    "mercury.jpg","venus.jpg","earth_atmos_2048.jpg","mars.jpg","jupiter.jpg"
  ];
  planetTex.forEach((t,i)=>{
    const p=new THREE.Mesh(
      new THREE.SphereGeometry(32+Math.random()*14,48,48),
      new THREE.MeshStandardMaterial({
        map:loader.load(`https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/${t}`),
        roughness:0.6
      })
    );
    miniPlanets.push(p);
    scene.add(p);
  });

  /* FOTOS */
  ["imagenes/image_0.png",
    "imagenes/image_1.png",
    "imagenes/image_2.png",
    "imagenes/image_3.png",
    "imagenes/image_4.png",
    "imagenes/image_5.png"].forEach(src=>{
    const tex=loader.load(src);
    tex.anisotropy=renderer.capabilities.getMaxAnisotropy();
    const s=new THREE.Sprite(new THREE.SpriteMaterial({map:tex}));
    s.scale.set(200,130,1);
    photos.push(s);
    scene.add(s);
  });

  /* FRASES GIRANDO */
  [
    "‚ôä G√©minis, dos almas conectadas",
    "‚ú® Nada fue casual",
    "üíû Vos y yo, siempre",
    "üå† Nuestra historia sigue",
    "üí´ Destino compartido",
    "üåô Amor que gira"
  ].forEach(t=>{
    const c=document.createElement("canvas");
    c.width=1024;c.height=256;
    const ctx=c.getContext("2d");
    ctx.fillStyle="#ffe0f0";
    ctx.font="48px Arial";
    ctx.textAlign="center";
    ctx.fillText(t,512,160);
    const tex=new THREE.CanvasTexture(c);
    const s=new THREE.Sprite(new THREE.SpriteMaterial({map:tex,transparent:true}));
    s.scale.set(480,120,1);
    orbitTexts.push(s);
    scene.add(s);
  });

  animate();
}

function animate(){
  requestAnimationFrame(animate);
  angle+=0.0018;

  stars.rotation.y+=0.00035;
  saturn.rotation.y+=0.0011;
  ring.rotation.z+=0.0008;

  miniPlanets.forEach((p,i)=>{
    const a=angle+(i*Math.PI*2/miniPlanets.length);
    p.position.set(Math.cos(a)*520,Math.sin(a)*180,Math.sin(a)*520);
  });

  photos.forEach((p,i)=>{
    const a=-angle+(i*Math.PI*2/photos.length);
    p.position.set(Math.cos(a)*750,Math.sin(a)*260,Math.sin(a)*750);
  });

  orbitTexts.forEach((t,i)=>{
    const a=angle*0.7+(i*Math.PI*2/orbitTexts.length);
    t.position.set(Math.cos(a)*650,Math.sin(a)*220,Math.sin(a)*650);
  });

  renderer.render(scene,camera);
}

onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
